<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Random interval timer</title>
</head>

<body>
	<h1>XXXX</h1>
	<button onclick="clicked(this);">ボタン</button>
	<span id="output"></span>
	<script>
		function clicked(button) {
			button.disabled = true;
			const output = document.getElementById("output");
			let i = 0;
			output.innerHTML = i;
			const timerId = setInterval(() => {
				if (++i < 10) {
					output.innerHTML = i;
				} else {
					clearInterval(timerId); // 定期実行の終了
					button.disabled = false;
				}
			}, 1000); // 1秒おきに実行
		}
	</script>
	<h1>音を鳴らす</h1>
	<button onclick="play();">play</button>
	<script>
		function play() {
			const ctx = new AudioContext();
			const oscillator = ctx.createOscillator();
			let current_time = ctx.currentTime;

			const freqAndTime = [[400, 1], [300, 2]];
			for (const [freq, time] of freqAndTime) {
				oscillator.frequency.setValueAtTime(freq, current_time);
				current_time += time;
			}

			oscillator.connect(ctx.destination);
			oscillator.start(ctx.currentTime);
			oscillator.stop(current_time);
		}
		window.AudioContext = window.AudioContext || window.webkitAudioContext;
	</script>
</body>

</html>
